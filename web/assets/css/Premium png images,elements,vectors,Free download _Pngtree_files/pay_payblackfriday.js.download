var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(a,e,t){a instanceof String&&(a=String(a));for(var n=a.length,r=0;r<n;r++){var i=a[r];if(e.call(t,i,r,a))return{i:r,v:i}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,t){a!=Array.prototype&&a!=Object.prototype&&(a[e]=t.value)},$jscomp.getGlobal=function(a){return("undefined"==typeof window||window!==a)&&"undefined"!=typeof global&&null!=global?global:a},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(a,e,t,n){if(e){for(t=$jscomp.global,a=a.split("."),n=0;n<a.length-1;n++){var r=a[n];r in t||(t[r]={}),t=t[r]}(e=e(n=t[a=a[a.length-1]]))!=n&&null!=e&&$jscomp.defineProperty(t,a,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("Array.prototype.find",function(a){return a||function(a,e){return $jscomp.findInternal(this,a,e).v}},"es6","es3"),$(function(){Pngtree.Pay={};var p,s,t,o=getInjectData(),d=0,c=0,u=o.type;p=window,s={},t={},{init:function(){$that=this,0<uid&&0==is_old&&this.extraInit(),this.click(),this.loadPop(),this.payPlugin(),this.payStatusWhile(),this.paymentWall(),this.payCard(),this.statistics();try{4!=vip_type?this.payPal():$("#go-pay-div .pay-box-title").text("You already have a lifetime premium and no need to recharge again :) If you have any question or demand please contact us.")}catch(a){}},extraInit:function(){d=5},loadPop:function(){var e=Pngtree.BaseFun.getLocalStorage("_pay_pv_")||"[]",a=(new Date).toLocaleDateString().replace(/\//g,"");try{e=JSON.parse(e)}catch(a){e=[]}3==(e[a]||0)&&vip_type<=0&&0==viewArgs.isMobileDevice&&0==viewArgs.couponStay&&(Pngtree.BaseFun.getAlertPage("#window-premium-detain","coupon-stay-win"),$("#window-premium-detain").show(),Pngtree.BaseFun.eventStatis("coupon-stay")),$("#window-premium-detain").on("click",".window-premium-detain-btn",function(){$.getJSON(ajaxHost+"/api/coupon/stay-coupon",{},function(a){"/pay/card"==$(location).attr("pathname")?p.location.href="/pay/card?type=4":p.location.reload()})})},payPlugin:function(){Pngtree.Pay.Ga_Order=function(a,e,t){ga("require","ecommerce"),ga("ecommerce:addTransaction",{id:a});var n="Month";switch(t){case 1:n="Month";break;case 3:n="Year";break;case 4:n="Permanent";break;case 6:n="Quarter";break;case 7:n="3Year";break;case 9:n="6Months"}ga("ecommerce:addItem",{id:a,name:n,sku:o.time,category:t,price:e,quantity:"1"}),ga("ecommerce:send")},Pngtree.Pay.changePrice=function(){var a;$(".package-plan").html(o.plan_card[u].package.plan),$(".package-plan-title").html(o.plan_card[u].package.title),3==u&&(vip_type<=0||viewArgs.renewalStatus||2==viewArgs.renewalCountdown)?$(".Present-discount").show():$(".Present-discount").hide(),3==u?$(".add-month").show():$(".add-month").hide(),$(".check-origin-price").html(Pngtree.Pay.toDecimal(o.plan_card[u].vip_showprice)),1==$(".coupon-time-at").data("has")&&$(".coupon-time-at").show(),void 0!==o.discount[u].status&&0!=o.discount[1].status&&0!=o.discount[3].status&&0!=o.discount[4].status&&0!=o.discount[6].status&&0!=o.discount[7].status&&0!=o.discount[9].status?($(".discount-price-p").show(),$(".check-discounted-price").html(Pngtree.Pay.toDecimal(parseFloat(o.discount[u].price)+parseFloat(o.plan_card[u].vip_showprice)-o.plan_card[u].price)),a=o.plan_card[u].price-o.discount[u].price,$(".check-total-price").html(Pngtree.Pay.toDecimal(a*viewArgs.renewalDiscount)),$(".renewal-number").html(Pngtree.Pay.toDecimal(a-a*viewArgs.renewalDiscount)),Pngtree.BaseFun.Countdown($(".renewal").data("t"),".r-u-d",".r-u-h",".r-u-m",".r-u-s"),$(".renewal").show()):($(".discount-price-p").show(),$(".check-discounted-price").html(Pngtree.Pay.toDecimal(parseFloat(o.discount[u].price)+parseFloat(o.plan_card[u].vip_showprice)-o.plan_card[u].price)),1==viewArgs.renewalStatus||2==viewArgs.renewalCountdown?(a=o.plan_card[u].price-o.discount[u].price,$(".check-total-price").html(Pngtree.Pay.toDecimal(a*viewArgs.renewalDiscount)),$(".renewal-number").html(Pngtree.Pay.toDecimal(a-a*viewArgs.renewalDiscount)),Pngtree.BaseFun.Countdown($(".renewal").data("t"),".r-u-d",".r-u-h",".r-u-m",".r-u-s"),$(".renewal").show()):($(".check-total-price").html(Pngtree.Pay.toDecimal(o.plan_card[u].price-o.discount[u].price)),$(".renewal").hide()))},Pngtree.Pay.getPromocodePrice=function(a,e){return 1==a.type?e*a.data:2==a.type?a.data:0},Pngtree.Pay.formatNumber=function(a,e,t){return!isNaN(parseFloat(a))&&isFinite(a)?(a=Number(a),(a=(a=(void 0!==e?a.toFixed(e):a).toString()).split("."))[0]=a[0].toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+(t||",")),a.join(".")):NaN},Pngtree.Pay.toDecimal=function(a,e){var t=parseFloat(a);if(e=e||0,isNaN(t))return!1;if(t=Math.round(100*a)/100,t=(a=(t=Pngtree.Pay.formatNumber(t)).toString()).indexOf("."),0<e)for(t<0&&(t=a.length,a+=".");a.length<=t+e;)a+="0";return a},Pngtree.Pay.paymentwall_load_country=function(e,t){e.hasClass("loaded-payment")?$(".go-payment").hide().eq(t).show():($("#base-loading-box").fadeIn(),$.getJSON(ajaxHost+"/api/pay/get-paymentwall-country",{_csrf:csrf,type:u},function(a){200==a.status&&($(".paymentwall-country").html(a.data),$(".po-lists").html(a.type_data),$(".go-payment").hide().eq(t).show(),e.addClass("loaded-payment"),$("#base-loading-box").fadeOut())}))},Pngtree.Pay.paymentwall_validate=function(a){var e,t=!0;return 1==a?(a=$(".paymentwall-email").val(),e=$("#pw-fullname").val(),""==a&&($(".paymentwall-email").parent().addClass("_error"),t=!1),Pngtree.BaseFun.Base_IsEmail(a)||($(".paymentwall-email").parent().addClass("_error"),t=!1),""==e&&($("#pw-fullname").parent().addClass("_error"),t=!1)):($(".pw-inputBox input").trigger("blur"),$(".pw-inputBox .form-error1").each(function(){1==$(this).data("error")&&(t=!1)})),t},Pngtree.Pay._changePrice=function(){var a;void 0!==o.discount[u].status&&0!=o.discount[1].status&&0!=o.discount[3].status&&0!=o.discount[4].status&&0!=o.discount[6].status&&0!=o.discount[7].status&&0!=o.discount[9].status?($(".check-origin-price").html(Pngtree.Pay.toDecimal(o.plan_card[u].vip_showprice)),$(".check-coupon-price").html(Pngtree.Pay.toDecimal(parseFloat(o.discount[u].price)+parseFloat(o.plan_card[u].vip_showprice)-o.plan_card[u].price)),$(".discount-send").hide(),$(".discount-send"+u).show(),a=o.plan_card[u].price-o.discount[u].price,$("#pay_price,.check-total-price").html(Pngtree.Pay.toDecimal(a))):($(".discount-send").hide(),$(".check-discard-price").html(Pngtree.Pay.toDecimal(parseFloat(o.plan_card[u].vip_showprice)-parseFloat(o.plan_card[u].price))),$(".check-origin-price").html(Pngtree.Pay.toDecimal(o.plan_card[u].vip_showprice)),$("#pay_price,.check-total-price").html(Pngtree.Pay.toDecimal(o.plan_card[u].price)))},Pngtree.Pay._changePriceDefault=function(){var a;void 0!==o.discount[u].status&&0!=o.discount[1].status&&0!=o.discount[3].status&&0!=o.discount[4].status&&0!=o.discount[6].status&&0!=o.discount[7].status&&0!=o.discount[9].status?($(".check-origin-price").html(Pngtree.Pay.toDecimal(o.plan_card[u].vip_showprice)),$(".price-coupon-li").show().find(".check-coupon-price").html(Pngtree.Pay.toDecimal(parseFloat(o.discount[u].price)+parseFloat(o.plan_card[u].vip_showprice)-o.plan_card[u].price)),$(".price-discard-li").hide(),$(".price-promo-li").hide(),a=o.plan_card[u].price-o.discount[u].price,$("#pay_price,.check-total-price").html(Pngtree.Pay.toDecimal(a))):($(".price-coupon-li").hide(),$(".price-discard-li").show().find(".check-discard-price").html(Pngtree.Pay.toDecimal(parseFloat(o.plan_card[u].vip_showprice)-parseFloat(o.plan_card[u].price))),$(".check-origin-price").html(Pngtree.Pay.toDecimal(o.plan_card[u].vip_showprice)),$("#pay_price,.check-total-price").html(Pngtree.Pay.toDecimal(o.plan_card[u].price)))},Pngtree.Pay.getPayInjectData=function(){return c=1,o},Pngtree.Pay.setPayInjectDataType=function(a){console.log(a),u=a}},statistics:function(){Pngtree.Pay.cardClickStatistics=function(a){$.getJSON(ajaxHost+"/api/statistics/click-pay-type",{lang:o.lang,_csrf:csrf,t:a})},$.getJSON(ajaxHost+"/api/statistics/enter-pay",{_csrf:csrf,is_new:o.is_new,lang:o.lang})},click:function(){$(".price-ul").on("click","li",function(){switch($(this).addClass("on").siblings("li").removeClass("on"),u=$(this).data("type")){case 1:var a="Month";break;case 3:a="Year";break;case 4:a="Permanent";break;case 6:a="Quarter";break;case 7:a="3Years";break;case 9:a="6Months";break;default:a="Month"}Pngtree.BaseFun.Ga_Deploy("Recharge_Page","Price_Type_Btn",a),Pngtree.Pay.changePrice()}),$("#pay-select").on("change",function(){var a=$(this).val();if(0!=a){switch($("#pay-select option[value=0]").remove(),u=a){case 1:pic_name="Month";break;case 3:pic_name="Year";break;case 4:pic_name="Permanent";break;case 6:pic_name="Quarter";break;case 7:pic_name="3Years";break;case 9:pic_name="6Months";break;default:pic_name="Month"}Pngtree.BaseFun.Ga_Deploy("Recharge_Page","Price_Type_Btn",pic_name),Pngtree.Pay.changePrice()}}),$(".pay-ul").on("click","li",function(){$(this).addClass("on").siblings("li").removeClass("on");var a=$(this).index();2==a&&0==c?Pngtree.Pay.paymentwall_load_country($(this),a):$(".go-payment").eq(a).show().siblings(".go-payment").hide()}),setTimeout(function(){$(".pay-ul").find("[data-type="+o.error_pay_type+"]").trigger("click")}),$(".box-agree").on("click","span",function(){$(this).toggleClass("on")}),$(".box-agree").on("click","a",function(){var a=$(this).data("load"),e=$(this);void 0===a?$.post(ajaxHost+"/api/pay/term",{_csrf:csrf},function(a){$(".pop-termsBg").html(a),e.data("load",1),$(".pop-termsBg").fadeIn()}):$(".pop-termsBg").fadeIn()}),$(".pop-termsBg").on("click",".btn-close",function(){$(".pop-termsBg").fadeOut()}),$(".pw-inputBox").on("blur","input",function(){var a,e=$(this).parent().find(".form-error1");$(this).is(".paymentwall-email")?""!=(a=$.trim($(this).val()))&&Pngtree.BaseFun.Base_IsEmail(a)?e.css("opacity",0).data("error","2"):e.html(e.data("info")).css("opacity",1).data("error","1"):$(this).is(".paymentwall-fullname")&&(""==$.trim($(this).val())?e.html(e.data("info")).css("opacity",1).data("error","1"):e.css("opacity",0).data("error","2")),$(".paymentwall-commit").removeClass("load-pay").html($(".paymentwall-commit").data("info"))}),Pngtree.Pay.tmpEmailInput="",$(".form-box,.pw-inputBox").on({blur:function(){$(this).hasClass("paymentwall-email")||$(this).hasClass("pay-email-input")?""==$.trim($(this).val())?($(this).addClass("warning"),$(this).parent().addClass("form-warning"),$(this).parent().parent().find(".form-error").css("opacity",1),$(this).siblings(".label-title").removeClass("on")):Pngtree.BaseFun.Base_IsEmail($(this).val())?($(this).removeClass("warning"),$(this).parent().removeClass("form-warning").addClass("form-success"),$(this).parent().parent().find(".form-error").css("opacity",0)):($(this).addClass("warning"),$(this).parent().addClass("form-warning"),$(this).parent().parent().find(".form-error").css("opacity",1),$(this).siblings(".label-title").removeClass("on"),Pngtree.Pay.tmpEmailInput=$(this).val(),$(this).val("")):""==$.trim($(this).val())?($(this).addClass("warning"),$(this).parent().addClass("form-warning"),$(this).parent().parent().find(".form-error").css("opacity",1),$(this).siblings(".label-title").removeClass("on")):($(this).removeClass("warning"),$(this).parent().removeClass("form-warning").addClass("form-success"),$(this).parent().parent().find(".form-error").css("opacity",0))},focus:function(){!$(this).hasClass("paymentwall-email")&&!$(this).hasClass("pay-email-input")||Pngtree.BaseFun.Base_IsEmail($(this).val())||($(this).val(Pngtree.Pay.tmpEmailInput),Pngtree.Pay.tmpEmailInput=""),$(this).parent().removeClass("form-warning").removeClass("form-success"),$(this).siblings(".label-title").addClass("on")}},"input"),$(".box-list").on("change","select",function(){""!=$(this).val()?($(this).siblings(".label-title").addClass("on"),$(this).parent().parent().find(".form-error").css("opacity",0)):($(this).siblings(".label-title").removeClass("on"),$("#country_code_user").parent().parent().find(".form-error").css("opacity",1))}),$("#ifrm_creditcard_checkout").on("load",function(){console.log("load"),Pngtree.BaseFun.loading(0)})},payStatusWhile:function(){s.flag=0,s.pay_chance=0,s.od=o.od,s.ds=void 0,s.notify=function(){null!=s.ds&&clearInterval(s.ds),s.ds=setInterval(function(){s.pw_notify(),s.flag+=1},3e3)},s.pw_notify=function(){300<s.flag&&(clearInterval(s.ds),$("#base-loading-box").fadeOut()),$.post(ajaxHost+"/api/pay/pw-notify",{_csrf:csrf,od:s.od},function(a){200==a.status&&(clearInterval(s.ds),PngClick.BaseClick.clickSerialNumber("pay","success_paymentwall"),p.location.href="/pay?success=1")},"json")}},paymentWall:function(){$(".paymentwall-commit").on("click",function(){if(4==vip_type)return alert("You already have a lifetime premium and no need to recharge again :) If you have any question or demand please contact us."),!1;if(1==o.payDay.s&&!1===confirm(o.payDay.info))return!1;var e,a,t,n,r,i=$(this);i.hasClass("load-pay")||(a=1==$(this).data("t")?1:2,Pngtree.Pay.paymentwall_validate(a)&&(i.html("Loading...").addClass("load-pay"),e=Pngtree.BaseFun.Base_OpenWin("","pay"),a=$(".paymentwall-email").val(),t=$(".po-lists .paymentwall-pay-ps li.on").data("ps"),n=$("#pw-fullname").val(),r=$(".paymentwall-country .country_code_user").val(),1==c&&(t=$(".po-lists li.on").data("ps")),$.post(ajaxHost+"/api/pay/paymentwall-gopay",{_csrf:csrf,email:a,ps:t,type:u,od:s.od,code:r,chance:s.pay_chance,usd:o.usd,username:n,typeArg:d},function(a){null!=s.ds&&clearInterval(s.ds),s.pay_chance+=1,i.html(i.data("info")).removeClass("load-pay"),200==a.status?(e.location.href=a.url,s.od=a.od,s.notify()):-1==a.status&&alert(a.info)},"json"),Pngtree.Pay.Ga_Order(o.od,o.plan_card[u].price,u),Pngtree.Pay.cardClickStatistics(4),PngClick.BaseClick.clickSerialNumber("pay","btn_paymentwall")))}),$(".paymentwall-country").on("change",".country_code_user",function(){if(1==c)return!1;var a=$(this).val();if(""==a)return!1;$("#base-loading-box").fadeIn(),$.getJSON(ajaxHost+"/api/pay/get-ps-type",{_csrf:csrf,code:a,type:u},function(a){200==a.status&&($(".po-lists").html(a.type_data),$("#base-loading-box").fadeOut())})}),$(".po-lists").on("click",".paymentwall-pay-ps li",function(){$(this).addClass("on").siblings("li").removeClass("on")})},payCard:function(){var l={};Pngtree.Pay.card_check_func=function(a){var e=!0;return""==l.cardHolderFirstName&&(1==a?$("#strat-cardHolderFirstName").parent().addClass("_error"):($("#strat-cardHolderFirstName").addClass("warning"),$("#strat-cardHolderFirstName").parent().parent().find(".form-error").css("opacity",1)),e=!1),""==l.cardHolderLastName&&(1==a?$("#strat-cardHolderLastName").parent().addClass("_error"):($("#strat-cardHolderLastName").addClass("warning"),$("#strat-cardHolderLastName").parent().parent().find(".form-error").css("opacity",1)),e=!1),""==l.billCountryCode&&(1==a?$("#country_code_user").parent().addClass("_error"):$("#country_code_user").parent().parent().find(".form-error").css("opacity",1),e=!1),""==l.cardHolderEmail&&(1==a?$("#strat-cardHolderEmail").parent().addClass("_error"):($("#strat-cardHolderEmail").addClass("warning"),$("#strat-cardHolderEmail").parent().parent().find(".form-error").css("opacity",1)),e=!1),Pngtree.BaseFun.Base_IsEmail(l.cardHolderEmail)||(1==a?$("#strat-cardHolderEmail").parent().addClass("_error"):($("#strat-cardHolderEmail").addClass("warning"),$("#strat-cardHolderEmail").parent().parent().find(".form-error").css("opacity",1)),e=!1),(""==l.billAddress||100<l.billAddress.length)&&(1==a?$("#start-billAddress").parent().addClass("_error"):($("#start-billAddress").addClass("warning"),$("#start-billAddress").parent().parent().find(".form-error").css("opacity",1)),e=!1),""==l.billPhoneNumber&&(1==a?$("#start-billPhoneNumber").parent().addClass("_error"):($("#start-billPhoneNumber").addClass("warning"),$("#start-billPhoneNumber").parent().parent().find(".form-error").css("opacity",1)),e=!1),""==l.billCity&&(1==a?$("#start-billCity").parent().addClass("_error"):($("#start-billCity").addClass("warning"),$("#start-billCity").parent().parent().find(".form-error").css("opacity",1)),e=!1),""==l.billZip&&(1==a?$("#billZip").parent().addClass("_error"):($("#billZip").addClass("warning"),$("#billZip").parent().parent().find(".form-error").css("opacity",1)),e=!1),e},$("#start-show-pay-box").on("click",function(){if(4==vip_type)return alert("You already have a lifetime premium and no need to recharge again :) If you have any question or demand please contact us."),!1;l.cardHolderFirstName=$.trim($("#strat-cardHolderFirstName").val()),l.cardHolderLastName=$.trim($("#strat-cardHolderLastName").val()),l.billCountryCode=$.trim($("#country_code_user").val()),l.cardHolderEmail=$.trim($("#strat-cardHolderEmail").val()),l.billAddress=$.trim($("#start-billAddress").val()),l.billPhoneNumber=$.trim($("#start-billPhoneNumber").val()),l.billCity=$.trim($("#start-billCity").val()),l.billZip=$.trim($("#billZip").val()),l.billState=$.trim($("#start-billState").val());var a=1==$(this).data("t")?1:2;if(Pngtree.Pay.card_check_func(a)){if(1==o.payDay.s&&!1===confirm(o.payDay.info))return!1;var c,a=o.plan_card[u].price;void 0!==o.discount[u].status&&0!=o.discount[u].status&&(a=(parseFloat(o.plan_card[u].price)-parseFloat(o.discount[u].price)).toFixed(1)),Pngtree.Pay.Ga_Order(o.od,a,u),$(this).hasClass("load")?Pngtree.BaseFun.loading(1):($(this).addClass("load"),c=$(this),2==o.pay?(console.log("pay-js"+u),$.post(ajaxHost+"/api/pay/card-gopay-ocean",{_csrf:csrf,type:u,cardInfo:l,usd:o.usd,typeArg:d},function(a){200==a.status&&($("#ocean-pay-form").html(a.data),$("#go-card-div").hide(),$("#paycard-if").show(),p.XMLHttpRequest&&(document.creditcard_payment_checkout.target="ifrm_creditcard_checkout"),document.creditcard_payment_checkout.submit(),Pngtree.BaseFun.loading(1),c.removeClass("load"))},"json"),Pngtree.Pay.cardClickStatistics(2),PngClick.BaseClick.clickSerialNumber("pay","btn_ocean_card")):6==o.pay?($.post(ajaxHost+"/api/pay/pay-card-checkout-from",{_crsf:csrf,type:u,typeArg:d,cardInfo:l},function(e){var t,n,r,i,a,s,o;200==e.status&&(t=function(a){a&&a.classList.remove("show"),document.getElementById("logo-payment-method").style.setProperty("display","none")},n=function(a,e){var t;a&&a.classList.add("show"),a=document.getElementById("logo-payment-method"),e&&(t=e.toLowerCase(),a.setAttribute("src","/assets/images/checkout/"+t+".svg"),a.setAttribute("alt",e||"payment method")),a.style.removeProperty("display")},r=function(a){document.getElementById("icon-"+a+"-error").style.removeProperty("display")},$("#frames-checkout").html(e.data),$("#go-card-div").hide(),$("#frames-checkout").show(),i=document.getElementById("pay-button"),a=document.getElementById("creditcard_payment_checkout"),Pngtree.BaseFun.loading(0),c.removeClass("load"),Frames.init(e.frames),s={"card-number":{src:"card",alt:"card number logo"},"expiry-date":{src:"exp-date",alt:"expiry date logo"},cvv:{src:"cvv",alt:"cvv logo"}},o={"card-number":"Please enter a valid card number","expiry-date":"Please enter a valid expiry date",cvv:"Please enter a valid cvv code"},Frames.addEventHandler(Frames.Events.FRAME_VALIDATION_CHANGED,function(a){var e=a.element;a.isValid||a.isEmpty?(console.log("card-number"===e&&!a.isEmpty),"card-number"!==e||a.isEmpty||n(),(a=document.getElementById("icon-"+e)).setAttribute("src","/assets/images/checkout/"+s[e].src+".svg"),a.setAttribute("alt",s[e].alt),r(e),document.querySelector(".error-message__"+e).textContent=""):("card-number"===e&&t(),(a=document.getElementById("icon-"+e)).setAttribute("src","/assets/images/checkout/"+s[e].src+"-error.svg"),a.setAttribute("alt",s[e].alt),document.getElementById("icon-"+e+"-error").style.setProperty("display","block"),document.querySelector(".error-message__"+e).textContent=o[e])}),Frames.addEventHandler(Frames.Events.CARD_VALIDATION_CHANGED,function(){i.disabled=!Frames.isCardValid()}),Frames.addEventHandler(Frames.Events.CARD_TOKENIZATION_FAILED,function(a){console.log("CARD_TOKENIZATION_FAILED: %o",a),Frames.enableSubmitForm()}),Frames.addEventHandler(Frames.Events.PAYMENT_METHOD_CHANGED,function(a){a=a.paymentMethod;var e=document.querySelector(".icon-container.payment-method");a?(r("card-number"),n(e,a)):t(e)}),Frames.addEventHandler(Frames.Events.CARD_VALIDATION_CHANGED,function(a){console.log("CARD_VALIDATION_CHANGED: %o",a),i.disabled=!Frames.isCardValid()}),Frames.addEventHandler(Frames.Events.CARD_TOKENIZED,function(a){$.post(ajaxHost+"/api/pay/pay-card-checkout",{_crsf:csrf,order_no:e.order_no,type:u,typeArg:d,cardInfo:l,checkoutToken:a.token},function(a){var e;Pngtree.BaseFun.loading(0),200==a.status?p.location.href=a.data:302==a.status?((e=document.createElement("iframe")).setAttribute("src",a.data),e.setAttribute("class","iframe-checkout-3ds"),$("#frames-checkout").html(e)):202==a.status?alert(a.msg):alert("sorry, please try again..."),Frames.enableSubmitForm()},"json")}),a.addEventListener("submit",function(a){Pngtree.BaseFun.loading(),a.preventDefault(),Frames.submitCard()}))},"json"),Pngtree.Pay.cardClickStatistics(6),PngClick.BaseClick.clickSerialNumber("pay","btn_checkout_card")):($.post(ajaxHost+"/api/pay/pay-card-xl",{_crsf:csrf,type:u,typeArg:d,cardInfo:l},function(a){200==a.status?($("#ocean-pay-form").html(a.data),$("#ocean-pay-form").find(".ocean-pay").trigger("submit"),Pngtree.BaseFun.loading(1)):(alert(a.info),Pngtree.BaseFun.loading(0)),c.removeClass("load")},"json"),Pngtree.Pay.cardClickStatistics(5),PngClick.BaseClick.clickSerialNumber("pay","btn_xl_card")))}})},payPal:function(){t.flag=0,t.ds=void 0,t.notify=function(){null!=t.ds&&clearInterval(t.ds),t.ds=setInterval(function(){t.pw_notify(),t.flag+=1},3e3)},t.pw_notify=function(){100<t.flag&&(clearInterval(t.ds),$("#base-loading-box").fadeOut()),$.post(ajaxHost+"/api/pay/paypal-notify",{_csrf:csrf},function(a){200==a.status&&(clearInterval(t.ds),p.location.href="/pay?success=1")},"json")};var a=[paypal.FUNDING.CARD,paypal.FUNDING.BANCONTACT,paypal.FUNDING.EPS,paypal.FUNDING.GIROPAY,paypal.FUNDING.IDEAL,paypal.FUNDING.MYBANK,paypal.FUNDING.SOFORT,paypal.FUNDING.CREDIT],e=[];o.is_eur&&(e=a),t.fundingSource=0,paypal.Button.render({env:o.pro_env?"production":"sandbox",style:{layout:"vertical",size:"large",shape:"rect",color:"gold"},commit:!0,funding:{allowed:e,disallowed:[]},payment:function(a,e){return e.request.post("/api/pay/pay-pal?usd="+o.usd,{trade:"paypal",type:u,_csrf:csrf,card:t.fundingSource,typeArg:d}).then(function(a){return 200==a.status?a.id:void alert(a.info)})},onAuthorize:function(a,e){return e.request.post("/api/pay/call-back-new",{_csrf:csrf,paymentID:a.paymentID,payerID:a.payerID}).then(function(a){200==a.status?(PngClick.BaseClick.clickSerialNumber("pay","success_paypal"),p.location.href="/pay?success=1"):alert(a.info)})},onClick:function(a){if(1==o.payDay.s&&!1===confirm(o.payDay.info))return!1;"paypal"==a.fundingSource?(Pngtree.BaseFun.pngtree_event("paypal_card_click",1,"paypal"),Pngtree.Pay.cardClickStatistics(1),PngClick.BaseClick.clickSerialNumber("pay","btn_paypal")):(void 0!==a.card?(t.fundingSource=1,Pngtree.BaseFun.pngtree_event("paypal_card_click",1,a.card)):(t.fundingSource=1,Pngtree.BaseFun.pngtree_event("paypal_card_click",1,"unknown")),Pngtree.Pay.cardClickStatistics(3),PngClick.BaseClick.clickSerialNumber("pay","btn_paypal_card")),t.notify()}},"#paypal-button-container")}}.init()}),$(function(){Pngtree.backPay={};var r,e=Pngtree.Pay.getPayInjectData(),i=e.type;r=window,{init:function(){if(($that=this).initEvent(),this.couponTime(),this.payPlugin(),this.statis(),this.team_paymentwall(),uid<1)return Pngtree.BaseFun.IsLogin(),!1},initEvent:function(){$(".BF-direct-nb").on("click",".icon-wenhao1",function(){$(this).parents(".BF-direct-nb").next(".BF-desc").toggle()});function a(){t.eq(n).addClass("BF-tab-active").siblings(".BF-tab").removeClass("BF-tab-active"),e.eq(n).addClass("BF-tab-target").siblings(".BF-panel").removeClass("BF-tab-target");var a=$(".BF-tab-active").data("type");$(".BF-btn").attr("data-type",a)}var e=$(".BF-panels > .BF-panel"),t=$(".BF-tabs > .BF-tab"),n=(n=$(".BF-tabs > .BF-tab-active").index())<0?0:n;$(".grab-now").on("click",".BF-btn",function(){if(uid<1)return Pngtree.BaseFun.IsLogin(),!1;i=$(this).attr("data-type"),Pngtree.Pay.setPayInjectDataType(i),Pngtree.backPay.changePriceShow();var a=$(".BF-zhihu");a.show(),a.length&&a[0].scrollIntoView(!0)}),$(".BF-buy-now").on("click",".BF-btn",function(){if(uid<1)return Pngtree.BaseFun.IsLogin(),!1;i=$(this).attr("data-type"),Pngtree.Pay.setPayInjectDataType(i),Pngtree.backPay.changePriceShow();var a=$(".BF-zhihu");a.show(),a.length&&a[0].scrollIntoView(!0)}),$(".BF-Collapse-btn").on("click",function(){$(".BF-zhihu").hide()}),$(".BF-tabs").on("click",".BF-tab",function(){n=$(this).index(),a()}),$(".BF-panels-prev").on("click",function(){0<n?n--:n=e.length-1,a()}),$(".BF-panels-next").on("click",function(){n<e.length-1?n++:n=0,a()}),$(".FAQs-list").on("click"," li",function(){$(this).toggleClass("on").find(".FAQs-question").slideToggle()}),$(".js-alert-prove").on("click",function(){$("#window-prove").show(),$("html").addClass("overflow-hidden")}),$(".js-alert-certificate").on("click",function(){$("#window-prove2").show(),$("html").addClass("overflow-hidden")}),$(".cls-btn").on("click",function(){$("html").removeClass("overflow-hidden")}),console.log("event"),$(".pay-ul").on("click","li",function(){$(this).addClass("on").siblings("li").removeClass("on");var e=$(this).index(),t=$(this);2==e?$(this).hasClass("loaded-payment")?$(".go-payment").hide().eq(e).show():($("#base-loading-box").fadeIn(),$.getJSON(ajaxHost+"/api/team-pay/get-paymentwall-country",{_csrf:csrf},function(a){200==a.status&&($(".paymentwall-country").append(a.data),$(".po-lists").html(a.type_data),$(".go-payment").hide().eq(e).show(),t.addClass("loaded-payment"),console.log(t),$("#base-loading-box").fadeOut())})):$(".go-payment").eq(e).show().siblings(".go-payment").hide()}),$(".formPayment-input").on("input",function(){$(this).val()?$(this).parents(".formPayment-box-inner").addClass("on").removeClass("_error"):$(this).parents(".formPayment-box-inner").removeClass("on").addClass("_error")}).on("blur",function(){$(this).val()?$(this).parents(".formPayment-box-inner").removeClass("_error"):$(this).parents(".formPayment-box-inner").addClass("_error")}),$(".formPayment-agree-text").on("click",function(){$("#pop-termsBg").hasClass("loading")?$("#pop-termsBg").show():$(this).hasClass("loading")||($(this).addClass("loading"),$.post(ajaxHost+"/api/pay/term",{_csrf:csrf},function(a){$("#pop-termsBg").html(a),$("#pop-termsBg").addClass("loading").fadeIn()}))}),$("#pop-termsBg").on("click",".btn-close",function(){$("#pop-termsBg").fadeOut()})},payPlugin:function(){Pngtree.backPay.changePriceShow=function(){console.log(i),$(".cur-duration-str").hide(),$(".cur-duration-"+i).show(),$(".teamPay-plan-edition").html(e.plan_card[i].package.title),$(".cur-show-price").html(Pngtree.Pay.toDecimal(e.plan_card[i].vip_showprice));var a=Pngtree.Pay.toDecimal(parseFloat(e.discount[i].price)+parseFloat(e.plan_card[i].vip_showprice)-e.plan_card[i].price);$(".cur-discard-price").html(a),$(".cur-duration-str").html(),a=e.plan_card[i].price-e.discount[i].price,$(".cur-total-price").html(a)},Pngtree.backPay.toDecimal=function(a,e){var t=parseFloat(a);if(e=e||0,isNaN(t))return!1;if(t=Math.round(100*a)/100,t=(a=(t=Pngtree.Pay.formatNumber(t)).toString()).indexOf("."),0<e)for(t<0&&(t=a.length,a+=".");a.length<=t+e;)a+="0";return a}},statis:function(){if(0<uid&&vip_type<=0)try{var a=Pngtree.BaseFun.getLocalStorage("_pay_pv_")||"[]",e=(new Date).toLocaleDateString().replace(/\//g,""),t=(a=JSON.parse(a))[e]||0;(a={})[e]=t+1,Pngtree.BaseFun.setLocalStorage("_pay_pv_",JSON.stringify(a))}catch(a){}},couponTime:function(){var a=$(".coupon-time-at-black").data("t");0<a&&($(".coupon-time-at-black").show(),setInterval(function(){$(".coupon_scen_pay_s_b").html(Math.floor(90*Math.random())+10)},50),console.log(a),Pngtree.BaseFun.Countdown(a,".coupon_year_pay",".coupon_hour_pay_back",".coupon_min_pay_back",".coupon_scen_pay_back",function(a,e,t,n){0==parseInt(a)&&0==parseInt(e)&&0==parseInt(t)&&0==parseInt(n)&&r.setTimeout(function(){r.location.reload()},2e3)}))},team_paymentwall:function(){$(".po-lists").on("click","li",function(){$(this).addClass("on").siblings("li").removeClass("on")}),$(".paymentwall-country").on("change",".country_code_user",function(){var a=$(this).val();if(""==a)return!1;$("#base-loading-box").fadeIn(),$.getJSON(ajaxHost+"/api/team-pay/get-ps-type",{_csrf:csrf,code:a,type:i},function(a){200==a.status&&($(".po-lists").html(a.type_data),$("#base-loading-box").fadeOut())})})}}.init()});